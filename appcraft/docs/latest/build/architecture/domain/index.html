

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Domain Layer &mdash; Appcraft 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=09dc0c05" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Infrastructure Layer" href="../infrastructure/index.html" />
    <link rel="prev" title="Application Layer" href="../application/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Appcraft
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started.html#starting-a-new-project">Starting a New Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../templates/index.html">Templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../templates/base/index.html">Base Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/logs/index.html">Logs Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/locales/index.html">Locales Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/flask_ui/index.html">Flask UI Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/flask_api/index.html">Flask API Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/web_scraping/index.html">Web Scraping Template</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Layered Architecture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../runner/index.html">Runner Layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#what-to-do-in-runners">What to Do in Runners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#what-to-avoid-in-runners">What to Avoid in Runners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#types-of-runners">Types of runners</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#example-of-a-runner">Example of a Runner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#running-applications">Running Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#running-auxiliary-runner">Running Auxiliary Runner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../runner/index.html#id2">Executing a Specific Runner</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../presentation/index.html">Presentation Layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../presentation/index.html#what-to-do-in-presentation">What to Do in Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../presentation/index.html#what-to-avoid-in-presentation">What to Avoid in Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../presentation/index.html#example-of-a-cli-presentation">Example of a CLI Presentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../application/index.html">Application Layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../application/index.html#what-to-do-in-application">What to Do in Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../application/index.html#what-to-avoid-in-application">What to Avoid in Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../application/index.html#example-of-a-dto">Example of a DTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../application/index.html#example-of-a-mapper">Example of a Mapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../application/index.html#example-of-a-service">Example of a Service</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Domain Layer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-to-do-in-domain">What to Do in Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-to-avoid-in-domain">What to Avoid in Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-of-a-model">Example of a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-of-repository-interface">Example of Repository Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-of-adapter-interface">Example of Adapter Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../infrastructure/index.html">Infrastructure Layer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../versions/index.html">Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Appcraft</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Layered Architecture</a></li>
      <li class="breadcrumb-item active">Domain Layer</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/architecture/domain/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="domain-layer">
<h1>Domain Layer<a class="headerlink" href="#domain-layer" title="Link to this heading"></a></h1>
<p>The <strong>Domain Layer</strong> is the heart of your application, where the business logic and rules are defined. It contains the <strong>models</strong> that represent your business entities, and the <strong>infrastructure interfaces</strong> that define the contract for persisting and retrieving these entities. This layer is independent of any external concerns, such as databases or frameworks, and focuses solely on the core logic of the application.</p>
<p>The Domain Layer serves to encapsulate the business rules and logic, ensuring that the rest of the system can interact with it without knowing the underlying implementation details.</p>
<section id="what-to-do-in-domain">
<h2>What to Do in Domain<a class="headerlink" href="#what-to-do-in-domain" title="Link to this heading"></a></h2>
<p>In the <strong>Domain Layer</strong>, it is essential to follow best practices to ensure a clean, maintainable, and scalable architecture. Here are some key principles to follow:</p>
<ul class="simple">
<li><p><strong>Encapsulate Business Logic</strong>:
The Domain Layer should be the central place for business rules and domain logic. Keep this layer independent of external frameworks or infrastructure to ensure testability and reusability.</p></li>
<li><p><strong>Use Rich Domain Models</strong>:
Prefer using rich domain models that encapsulate both data and behavior instead of relying only on anemic data structures. This helps enforce domain rules and improves maintainability.</p></li>
<li><p><strong>Keep Domain Models Independent</strong>:
Avoid dependencies on infrastructure, frameworks, or database models. The domain models should represent the business concepts without being affected by external concerns.</p></li>
<li><p><strong>Define Clear Boundaries</strong>:
Clearly define the boundaries of your domain entities and value objects. Ensure that changes to one entity do not inadvertently impact unrelated parts of the system.</p></li>
<li><p><strong>Follow Interface-Based Design for Repositories</strong>:
Define repository interfaces in the Domain Layer, keeping the implementation details in the Infrastructure Layer. This abstraction allows easy substitution and testing.</p></li>
<li><p><strong>Use Value Objects When Applicable</strong>:
Instead of using primitive types everywhere, consider using <strong>Value Objects</strong> for attributes that have specific business meaning, ensuring data consistency and enforcing constraints.</p></li>
<li><p><strong>Ensure Immutability When Possible</strong>:
Make domain models immutable whenever possible to prevent unintended side effects and maintain a predictable state throughout the application.</p></li>
<li><p><strong>Write Unit Tests for Domain Logic</strong>:
The Domain Layer should be highly testable. Write unit tests to verify business rules and domain logic independently from external dependencies.</p></li>
</ul>
</section>
<section id="what-to-avoid-in-domain">
<h2>What to Avoid in Domain<a class="headerlink" href="#what-to-avoid-in-domain" title="Link to this heading"></a></h2>
<p>In the <strong>Domain Layer</strong>, it is crucial to maintain a clear separation of concerns. Here are some common pitfalls to avoid:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Business Logic in Other Layers</strong>: Avoid placing business logic in the <strong>Application Layer</strong>, <strong>Presentation Layer</strong>, or <strong>Infrastructure Layer</strong>. The <strong>Domain Layer</strong> should be the place for business rules and models.</p></li>
<li><p><strong>Direct Database Access</strong>: Avoid having database-specific code or direct access to databases in the <strong>Domain Layer</strong>. Use repository interfaces to abstract away the database interaction.</p></li>
<li><p><strong>External Dependencies</strong>: The <strong>Domain Layer</strong> should not have dependencies on external frameworks, libraries, or infrastructure concerns. Keep it focused on the core business logic and rules.</p></li>
<li><p><strong>UI Logic</strong>: Avoid placing UI-related logic in the <strong>Domain Layer</strong>. The <strong>Domain</strong> should be agnostic to the user interface and should not know how data is presented to the user.</p></li>
<li><p><strong>Global State</strong>: The <strong>Domain Layer</strong> should not depend on or modify global state. The state should be encapsulated in objects and managed through domain logic.</p></li>
</ul>
</div></blockquote>
</section>
<section id="example-of-a-model">
<h2>Example of a Model<a class="headerlink" href="#example-of-a-model" title="Link to this heading"></a></h2>
<p>Here’s an example of a <strong>Model</strong> in the <strong>Domain Layer</strong>, representing a <strong>User</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># domain/models/user.py</span>
<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">user_id</span> <span class="o">=</span> <span class="n">user_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">change_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">new_name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">change_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">new_email</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;User(id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user_id</span><span class="si">}</span><span class="s2">, name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">, email=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">email</span><span class="si">}</span><span class="s2">)&quot;</span>
</pre></div>
</div>
<p>In this example, the <cite>User</cite> class is a core business model that represents a user entity. It encapsulates the data and behaviors related to a user in the system.</p>
</section>
<section id="example-of-repository-interface">
<h2>Example of Repository Interface<a class="headerlink" href="#example-of-repository-interface" title="Link to this heading"></a></h2>
<p>Here’s an example of a <strong>Repository Interface</strong> in the <strong>Domain Layer</strong>, defining methods for interacting with <strong>User</strong> data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># domain/repositories/user_repository_interface.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">domain.models.user</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserRepositoryInterface</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a user by ID&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new user&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update an existing user&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a user&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>In this example, the <cite>UserRepositoryInterface</cite> defines the contract for repository operations such as creating, updating, and deleting users. This repository is abstract and doesn’t deal with database specifics—it only specifies what actions can be performed on the <strong>User</strong> entity.</p>
</section>
<section id="example-of-adapter-interface">
<h2>Example of Adapter Interface<a class="headerlink" href="#example-of-adapter-interface" title="Link to this heading"></a></h2>
<p>This is an example of an <strong>Adapter Interface</strong> in the <strong>Domain Layer</strong>, defining a contract for retrieving <strong>App</strong> data:
.. code-block:: python</p>
<blockquote>
<div><p># domain/adapters/app_adapter_interface.py
from abc import ABC, abstractmethod</p>
<p>from domain.models.app import App</p>
<dl>
<dt>class AppAdapterInterface(ABC):</dt><dd><p>&#64;abstractmethod
def get_app(self) -&gt; App:</p>
<blockquote>
<div><p>pass</p>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>In this example, the <cite>AppAdapterInterface</cite> establishes a clear contract for accessing application-related data.
This interface does not deal with infrastructure-specific details (such as databases, filesystem or external APIs); instead, it defines the expected behavior that any concrete adapter must implement.
By using this abstraction, the <strong>Application Layer</strong> can interact with the infrastructure in a decoupled manner, ensuring better maintainability and testability.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../application/index.html" class="btn btn-neutral float-left" title="Application Layer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../infrastructure/index.html" class="btn btn-neutral float-right" title="Infrastructure Layer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Dux Tecnologia, Thiago Costa Pereira.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>